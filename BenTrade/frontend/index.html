<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BenTrade</title>

  <link rel="icon" href="assets/icons/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/favicon-180.png">

  <link rel="stylesheet" href="assets/css/app.css">
  <style>
    :root{
      --scroll-pad: 36px;
    }
    .shell{
      max-width:1860px;
      margin:0 auto;
      padding:10px 14px;
      height:100vh;
      min-height:0;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .shell-layout{
      display:grid;
      grid-template-columns:260px minmax(0, 1fr) 320px;
      gap:18px;
      align-items:stretch;
      margin-top:10px;
      flex:1 1 auto;
      min-height:0;
    }
    .shell-layout > .sidebar{
      min-height:0;
      overflow:auto;
      padding-bottom: var(--scroll-pad);
      box-sizing: border-box;
    }
    .shell-layout > .main{
      flex:1 1 auto;
      min-width:0;
      min-height:0;
      overflow:auto;
      padding-bottom: var(--scroll-pad);
      box-sizing: border-box;
    }
    .shell-layout > .diagnostic-sidebar{
      flex:0 0 auto;
      width:320px;
      min-width:320px;
      min-height:0;
      overflow:auto;
      padding-bottom: var(--scroll-pad);
      box-sizing: border-box;
    }
    @media (max-width: 1200px){
      .shell-layout{ grid-template-columns:240px minmax(0, 1fr) 300px; }
      .shell-layout > .diagnostic-sidebar{ width:300px; min-width:300px; }
    }
    @media (max-width: 980px){
      .shell-layout{ grid-template-columns:220px minmax(0, 1fr); }
      .shell-layout > .diagnostic-sidebar{ display:none; }
    }

    .dash-frame{
      width:100%;
      height: calc(100vh - 210px);
      border:0;
      border-radius:16px;
      background: rgba(0,0,0,0.0);
      box-shadow:
        0 18px 52px rgba(0,0,0,0.55),
        0 0 0 1px rgba(0,234,255,0.14) inset,
        0 0 34px rgba(0,234,255,0.10);
    }
    /* Left nav layout */
    .nav-panel{
      display:flex;
      flex-direction:column;
      min-height:0;
      max-height:100%;
      overflow-y:auto;
      padding-top:10px;
      padding-bottom: var(--scroll-pad);
    }
    .nav-group{ margin-top:16px; flex:0 0 auto; }
    .nav-group:first-of-type{ margin-top:0; }
    .nav-group-header{
      font-family:'Orbitron',sans-serif;
      font-size:11px;
      letter-spacing:0.2em;
      text-transform:uppercase;
      color: rgba(215,251,255,0.88);
      margin:6px 0 4px;
      min-height:16px;
      display:flex;
      align-items:flex-end;
    }
    .nav-group-desc{
      font-size:11px;
      color: rgba(147,167,182,0.9);
      margin-bottom:8px;
      line-height:1.3;
    }
    .nav-parent-label{
      font-size:11px;
      letter-spacing:0.08em;
      text-transform:uppercase;
      color: rgba(160,230,238,0.9);
      margin:8px 2px 6px;
    }
    .nav-subgroup-desc{
      font-size:11px;
      color: rgba(147,167,182,0.9);
      margin:0 2px 8px;
      line-height:1.3;
    }
    .nav-link{
      text-decoration:none;
      display:flex;
      align-items:flex-start;
      gap:10px;
      padding:10px 12px;
      line-height:1.3;
    }
    .nav-item-text{ display:flex; flex-direction:column; gap:2px; min-width:0; }
    .nav-item-title{ font-size:13px; line-height:1.2; color: rgba(0,234,255,0.96); }
    .nav-item-sub{ font-size:11px; line-height:1.25; color: rgba(170,210,224,0.9); }
    .nav-link.active .nav-item-title{ color: rgba(215,251,255,0.98); }
    .nav-link.active .nav-item-sub{ color: rgba(190,236,244,0.96); }
    .nav-link.disabled{ opacity:0.45; cursor:not-allowed; }
    .nav-link.disabled:hover{ filter:none; transform:none; }
    .hero-context{
      font-size:11px;
      letter-spacing:0.08em;
      color: rgba(165,219,232,0.9);
      line-height:1.2;
      text-align:center;
      text-transform:none;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:100%;
    }
    .titlebar-right{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      min-width:170px;
      z-index:2;
    }
    .titlebar-right .btn{
      white-space:nowrap;
    }
    .brand-stack{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:6px;
      z-index:2;
    }
    .brand-nav{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .brand-nav-btn{
      padding:4px 10px;
      border-radius:999px;
      font-size:11px;
      line-height:1.1;
      min-height:26px;
    }
    .brand-nav-btn:disabled{
      opacity:0.45;
      cursor:not-allowed;
      transform:none;
      filter:none;
      box-shadow: 0 0 0 1px rgba(0,234,255,0.08) inset;
    }
    .brand-nav-btn:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px rgba(0,234,255,0.14), 0 0 18px rgba(0,234,255,0.16);
    }
  
    #view{ min-width:0; min-height:0; display:block; height:auto; overflow:visible; padding-bottom: var(--scroll-pad); box-sizing:border-box; }
    .view-wrap{ width:100%; min-height:0; padding-bottom: var(--scroll-pad); box-sizing:border-box; }
</style>
</head>
<body>
  <div class="shell">
    <!-- Header banner (matches dashboard) -->
    <div class="titlebar">
      <div class="brand-stack">
        <div class="brand-badge" aria-hidden="true">
          <span class="bt">BT</span>
          <span class="brand-name">BenTrade</span>
        </div>
        <div class="brand-nav" aria-label="App navigation controls">
          <button id="headerBackBtn" class="btn brand-nav-btn" type="button" title="Back" aria-label="Back" disabled>◀ Back</button>
          <button id="headerForwardBtn" class="btn brand-nav-btn" type="button" title="Forward" aria-label="Forward" disabled>Forward ▶</button>
          <button id="headerHomeBtn" class="btn brand-nav-btn" type="button" title="Home" aria-label="Home">⌂ Home</button>
        </div>
      </div>
      <div class="hero">
        <div class="hero-title">BENTRADE</div>
        <div class="hero-subtitle">Credit Spread Analysis</div>
        <div class="hero-context" id="heroContext">Analysis → Options → Credit Spreads</div>
      </div>
      <div class="titlebar-right">
        <button id="fullscreenToggleBtn" class="btn" type="button">Fullscreen</button>
      </div>
    </div>
    <div class="subtitlebar"  style="margin-top:10px;">
    </div>

    <div class="shell-layout">
      <aside class="sidebar">
        <div class="nav-panel">
          <section class="nav-group" aria-label="Navigation">
            <div class="nav-group-header">Navigation</div>
            <a class="nav-link" href="#/home" data-route="home">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Home</span>
                <span class="nav-item-sub">Market overview command center</span>
              </span>
            </a>
          </section>

          <section class="nav-group" aria-label="Analysis">
            <div class="nav-group-header">Analysis</div>
            <div class="nav-group-desc">Market and strategy analysis dashboards</div>

            <div class="nav-parent-label">Stocks</div>
            <div class="nav-subgroup-desc">Market-level and single-symbol analysis</div>
            <a class="nav-link" href="#/stock-analysis" data-route="stock-analysis">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Stock Analysis</span>
                <span class="nav-item-sub">Analysis → Stocks → Single symbol</span>
              </span>
            </a>
            <a class="nav-link" href="#/stock-scanner" data-route="stock-scanner">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Stock Scanner</span>
                <span class="nav-item-sub">Analysis → Stocks → Ranked ideas</span>
              </span>
            </a>

            <div class="nav-parent-label">Options</div>
            <div class="nav-subgroup-desc">Strategy scanners for option structures</div>
            <a class="nav-link" href="#/credit-spread" data-route="credit-spread">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Credit Spread</span>
                <span class="nav-item-sub">Analysis → Options → Credit spreads</span>
              </span>
            </a>
            <a class="nav-link" href="#/debit-spreads" data-route="debit-spreads">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Debit Spreads</span>
                <span class="nav-item-sub">Analysis → Options → Directional → Long premium</span>
              </span>
            </a>
            <a class="nav-link" href="#/iron-condor" data-route="iron-condor">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Iron Condor</span>
                <span class="nav-item-sub">Analysis → Options → Premium selling → Neutral</span>
              </span>
            </a>
            <a class="nav-link" href="#/butterflies" data-route="butterflies">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Butterflies</span>
                <span class="nav-item-sub">Analysis → Options → Directional/Neutral → Pin risk</span>
              </span>
            </a>
            <a class="nav-link" href="#/calendar" data-route="calendar">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Calendar</span>
                <span class="nav-item-sub">Analysis → Options → Vol/term structure</span>
              </span>
            </a>
            <a class="nav-link" href="#/income" data-route="income">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Income (Covered Call / CSP)</span>
                <span class="nav-item-sub">Analysis → Options → Income</span>
              </span>
            </a>
          </section>

          <section class="nav-group" aria-label="Trading">
            <div class="nav-group-header">Trading</div>
            <div class="nav-group-desc">Execution &amp; Monitoring</div>
            <a class="nav-link" href="#/active-trade" data-route="active-trade">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Active Trades</span>
                <span class="nav-item-sub">Trading → Broker positions/orders</span>
              </span>
            </a>
            <a class="nav-link" href="#/trade-testing" data-route="trade-testing">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Trade Testing Workbench</span>
                <span class="nav-item-sub">Trading → What-if lab + scenarios</span>
              </span>
            </a>
          </section>

          <section class="nav-group" aria-label="Risk">
            <div class="nav-group-header">Risk</div>
            <div class="nav-group-desc">Institutional controls</div>
            <a class="nav-link" href="#/risk-capital" data-route="risk-capital">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Risk &amp; Capital</span>
                <span class="nav-item-sub">Risk → Policies + limits</span>
              </span>
            </a>
            <a class="nav-link" href="#/portfolio-risk" data-route="portfolio-risk">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Portfolio Risk Matrix</span>
                <span class="nav-item-sub">Risk → Greeks + scenarios</span>
              </span>
            </a>
          </section>

          <section class="nav-group" aria-label="Lifecycle">
            <div class="nav-group-header">Lifecycle</div>
            <div class="nav-group-desc">Process &amp; journaling</div>
            <a class="nav-link" href="#/trade-lifecycle" data-route="trade-lifecycle">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Trade Lifecycle</span>
                <span class="nav-item-sub">Lifecycle → States + history</span>
              </span>
            </a>
            <a class="nav-link" href="#/strategy-analytics" data-route="strategy-analytics">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Strategy Analytics</span>
                <span class="nav-item-sub">Lifecycle → Performance + attribution</span>
              </span>
            </a>
          </section>

          <section class="nav-group" aria-label="Admin">
            <div class="nav-group-header">Admin</div>
            <div class="nav-group-desc">Operational diagnostics</div>
            <a class="nav-link" href="#/admin/data-workbench" data-route="admin/data-workbench">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Data Workbench</span>
                <span class="nav-item-sub">Admin → Trade JSON + details viewer</span>
              </span>
            </a>
            <a class="nav-link" href="#/admin-data-health" data-route="admin-data-health">
              <span class="nav-dot"></span>
              <span class="nav-item-text">
                <span class="nav-item-title">Data Health</span>
                <span class="nav-item-sub">Admin → Provider + validation events</span>
              </span>
            </a>
          </section>
        </div>
      </aside>

      <main class="main">
        <div id="view"></div>
      </main>

      <!-- GLOBAL RIGHT INFO BAR — DO NOT RENDER THESE PANELS IN PAGE COMPONENTS -->
      <aside class="diagnostic-sidebar">
        <div class="diagnosticPanel">
          <div class="diagnosticSection">
            <div class="diagnosticTitle" id="sourceHealthTitle" data-base-text="SOURCE HEALTH">SOURCE HEALTH</div>
            <div id="sourceHealthRows"></div>
          </div>

          <div class="diagnosticSection">
            <div class="diagnosticTitle" style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
              <span id="sessionStatsTitle">SESSION STATS</span>
              <button id="sessionStatsResetBtn" class="btn" type="button" style="padding:4px 8px;font-size:11px;line-height:1.1;">Reset</button>
            </div>
            <div id="sessionStatsMeta" class="stock-note" style="margin-bottom:8px;"></div>
            <div id="reportStatsGrid" class="statGrid"></div>
          </div>

          <div class="diagnosticSection">
            <div class="diagnosticTitle">STRATEGY LEADERBOARD</div>
            <div class="risk-table-wrap" style="margin-bottom:8px;">
              <table class="risk-table">
                <thead>
                  <tr>
                    <th>Strategy</th>
                    <th>Avg Quality</th>
                    <th>Avg RoR</th>
                    <th>Trades</th>
                  </tr>
                </thead>
                <tbody id="globalStrategyRows"></tbody>
              </table>
            </div>
            <div id="globalStrategyMini" class="home-strategy-mini"></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Router is provided by assets/js/router.js -->

  <script src="assets/js/utils/debug.js?v=20260217a"></script>
  <script src="assets/js/state/session_state.js?v=20260215a"></script>
  <script src="assets/js/api/client.js?v=20260216e"></script>
  <script src="assets/js/utils/tradeKey.js?v=20260216a"></script>
  <script src="assets/js/utils/format.js?v=20260217a"></script>
  <script src="assets/js/utils/tradeAccessor.js?v=20260217a"></script>
  <script src="assets/js/metrics/glossary.js?v=20260215a"></script>
  <script src="assets/js/ui/tooltip.js?v=20260215a"></script>
  <script src="assets/js/ui/trade_card.js?v=20260217a"></script>
  <script src="assets/js/ui/source_health.js?v=20260215a"></script>
  <script src="assets/js/ui/boot_choice_modal.js?v=20260218a"></script>
  <script src="assets/js/ui/home_loading_overlay.js?v=20260216b"></script>
  <script src="assets/js/utils/rateLimiter.js?v=20260216a"></script>
  <script src="assets/js/ui/notes.js?v=20260216a"></script>
  <script src="assets/js/stores/sessionStats.js?v=20260216b"></script>
  <script src="assets/js/stores/homeCache.js?v=20260215a"></script>
  <script src="assets/js/stores/scannerOrchestrator.js?v=20260218a"></script>
  <script src="assets/js/stores/playbookScoring.js?v=20260219a"></script>
  <script src="assets/js/strategies/profiles.js?v=20260218a"></script>
  <script src="assets/js/strategies/defaults.js?v=20260218a"></script>
  <script src="assets/js/stores/symbolUniverse.js?v=20260218a"></script>
  <script src="assets/js/ui/symbolUniverseSelector.js?v=20260218a"></script>
  <script src="assets/js/config/strategy_card_config.js?v=20260218a"></script>
  <script src="assets/js/models/option_trade_card_model.js?v=20260218a"></script>
  <script src="assets/js/pages/strategy_dashboard_shell.js?v=20260218a"></script>
  <script src="assets/js/pages/active_trades.js?v=20260217a"></script>
  <script src="assets/js/pages/trade_workbench.js?v=20260217a"></script>
  <script src="assets/js/pages/stock_analysis.js?v=20260216d"></script>
  <script src="assets/js/pages/stock_scanner.js?v=20260217a"></script>
  <script src="assets/js/pages/home.js?v=20260217a"></script>
  <script src="assets/js/pages/risk_capital.js?v=20260216a"></script>
  <script src="assets/js/pages/portfolio_risk.js?v=20260216a"></script>
  <script src="assets/js/pages/trade_lifecycle.js?v=20260216a"></script>
  <script src="assets/js/pages/strategy_analytics.js?v=20260216a"></script>
  <script src="assets/js/pages/data_health.js?v=20260217a"></script>
  <script src="assets/js/pages/admin_data_workbench.js?v=20260217b"></script>
  <script src="assets/js/app.js?v=20260217a"></script>
  <script src="assets/js/router.js?v=20260216c"></script>
</body>
</html>

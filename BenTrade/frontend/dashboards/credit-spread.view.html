<!-- BenTrade Dashboard View: Credit Spread Analysis -->
<div class="view-wrap">
<div class="dashboard-layout">
            <main class="main">
                <div class="file-selector">
                    <h2>Analysis Report + Underlying</h2>
                    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
                        <select id="reportSelect" style="flex:1;min-width:260px">
                            <option value="">Loading reports...</option>
                        </select>

                        <select id="fileSelect" style="flex:1;min-width:260px">
                            <option value="ALL">Loading symbols...</option>
                        </select>

                        <button id="genBtn" class="btn" style="flex:0 0 auto;padding:10px 14px;">Generate New Report</button>
                    </div>

                    <div style="margin-top:12px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
                        <label style="display:flex;align-items:center;gap:8px;color:rgba(215,251,255,0.96);font-size:13px;">
                            <input id="manualFiltersEnabled" type="checkbox" />
                            <span>Enable manual filters</span>
                        </label>
                    </div>

                    <div id="manualFiltersPanel" style="display:none;margin-top:10px;padding:10px;border:1px solid rgba(0,220,255,0.18);border-radius:10px;background:rgba(3,10,18,0.45);">
                        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:flex-end;">
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">DTE min<input id="mfDteMin" type="number" step="1" min="1" style="width:88px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">DTE max<input id="mfDteMax" type="number" step="1" min="1" style="width:88px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Exp Move x<input id="mfExpMoveX" type="number" step="0.1" min="0" style="width:100px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Width min<input id="mfWidthMin" type="number" step="0.5" min="0" style="width:90px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Width max<input id="mfWidthMax" type="number" step="0.5" min="0" style="width:90px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Min POP<input id="mfMinPop" type="number" step="0.01" min="0" max="1" style="width:95px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Min EV/Risk<input id="mfMinEvRisk" type="number" step="0.01" min="0" style="width:110px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Max spread %<input id="mfMaxSpreadPct" type="number" step="0.1" min="0" style="width:110px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Min OI<input id="mfMinOi" type="number" step="1" min="0" style="width:88px;" /></label>
                            <label style="display:flex;flex-direction:column;gap:2px;font-size:11px;opacity:0.9;">Min Vol<input id="mfMinVol" type="number" step="1" min="0" style="width:88px;" /></label>
                        </div>
                        <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">
                            <button id="mfUseDefaultsBtn" class="btn" type="button">Use Defaults</button>
                            <button id="mfApplyBtn" class="btn" type="button">Apply Filters</button>
                            <button id="mfResetBtn" class="btn" type="button">Reset</button>
                        </div>
                    </div>
                </div>

                <div id="tradeCountsBar" style="margin-top:12px;color:rgba(190,236,244,0.94);font-size:12px;"></div>
                <div id="manualFilterPill" style="display:none;margin-top:8px;"></div>

                        <!-- Content area where analysis results will be rendered -->
                        <div id="content" style="margin-top:18px"></div>

                    </main>
                </div>

    

    <!-- Execute Trade Modal (UI-only) -->
    <div id="tradeModal" style="display:none;position:fixed;inset:0;z-index:2600;align-items:center;justify-content:center;background:rgba(2,6,18,0.78);backdrop-filter:blur(6px);">
        <div style="width:min(520px,92vw);border-radius:16px;padding:18px 18px 14px;background:linear-gradient(180deg, rgba(6,6,18,0.92), rgba(8,6,22,0.88));border:1px solid rgba(0,220,255,0.18);box-shadow:0 30px 90px rgba(0,220,255,0.14), 0 22px 70px rgba(0,234,255,0.12);">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
                <div style="font-family:'Orbitron',sans-serif;color:var(--accent-cyan);letter-spacing:0.14em;text-transform:uppercase;font-size:14px;">Execute Trade</div>
                <button class="btn" style="padding:6px 10px" onclick="closeTradeModal()">Close</button>
            </div>
            <div style="color:#e6fbff;font-size:15px;line-height:1.4;margin:10px 0 14px;">
                trade capability off
            </div>
            <div style="color:var(--muted);font-size:12px;line-height:1.4;">
                (Stub UI only â€” wire this to your broker execution path later.)
            </div>
        </div>
    </div>


    <!-- Simple modal for Execute Trade -->
    <div id="modal" onclick="this.style.display='none'">
        <div id="modalCard" onclick="event.stopPropagation()">
            <div id="modalTitle">Trade Action</div>
            <div id="modalMsg">Trade capability off</div>
            <button id="modalClose" class="btn" onclick="document.getElementById('modal').style.display='none'">Close</button>
        </div>
    </div>

    <!-- Generate overlay (used by the Generate New Report button) -->
    <div id="genOverlay" style="display:none;position:fixed;inset:0;z-index:2700;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);backdrop-filter:blur(6px);">
        <div style="width:min(560px,92vw);border-radius:12px;padding:18px;background:linear-gradient(180deg, rgba(6,6,18,0.92), rgba(8,6,22,0.88));border:1px solid rgba(0,220,255,0.12);box-shadow:0 30px 90px rgba(0,220,255,0.08);">
            <div style="display:flex;flex-direction:column;align-items:center;gap:12px;padding:6px 8px;">
                <div class="overlay-spinner" style="width:88px;height:88px;border-radius:50%;border:8px solid rgba(255,255,255,0.06);border-top-color:#00eaff;animation:spin 900ms linear infinite;"></div>
                <div id="genStatus" style="color:#e6fbff;font-size:15px;text-align:center;">Starting...</div>
                <div id="genStatusLog" style="width:100%;max-height:220px;overflow:auto;border:1px solid rgba(0,234,255,0.2);border-radius:10px;padding:10px 12px;background:rgba(2,8,16,0.55);color:#9fefff;font-size:12px;line-height:1.45;"></div>
            </div>
        </div>
    </div>
</div>
